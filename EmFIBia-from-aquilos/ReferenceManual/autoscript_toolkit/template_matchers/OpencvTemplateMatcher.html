<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="../../Resources/common-style.css">
    <link rel="stylesheet" type="text/css" href="../../Resources/page-style.css">
    <link rel="stylesheet" type="text/css" href="../../Resources/page-custom-style.css">
    <link rel="stylesheet" type="text/css" href="../../Resources/syntax-highlight-style.css">

    <script src="../../Resources/common.js"></script>
    <script src="../../Resources/page.js"></script>
    <script src="../../Resources/page_jupyter_checking_ie.js"></script>
    <script src="../../Resources/page_jupyter_checking.js"></script>
    <script src="../../Resources/prism.js"></script>
    <script src="../../Resources/prism-normalize-whitespace.js"></script>
    <script src="../../Resources/prism-c.js"></script>
    <script src="../../Resources/prism-cpp.js"></script>
    <script src="../../Resources/prism-csharp.js"></script>
    <script src="../../Resources/prism-python.js"></script>

    <script>
        window.addEventListener('DOMContentLoaded', function() {
            onContentLoaded('../../shell.html');

            try {
                checkAllJupyterLinks();
            } catch(e) {
                disableAllJupyterLinks();
            };
        });
    </script>

    <!-- For old IE browsers: IE 9 and lower -->
    <!--[if IE]>
    <link rel="stylesheet" type="text/css" href="../../Resources/page-style-old-ie.css">
    <![endif]-->
</head>
<body>
<!-- Custom part - START -->
	<h1><a class="header-path" href="#">OpencvTemplateMatcher</a></h1>
	<p>This class represents an image template matcher based on the <em>OpenCV</em> template matching algorithm.</p>
	<h2>Methods</h2>
	<table>
		<tr>
			<td><a href="OpencvTemplateMatcher/__init__.html">__init__()</a></td>
			<td>Creates a new <code>OpencvTemplateMatcher</code> using the given OpenCV comparison method.</td>
		</tr>
		<tr>
			<td><a href="TemplateMatcher/match.html">match()</a></td>
			<td>
			    Finds the specified template image within the given searched image.
  		    </td>
		</tr>
	</table>
	
    <h2>Remarks</h2>
    
    <ul class="spaced-list">
        <li>
            <em>OpenCV</em> is a widely-used image processing library that is included in the AutoScript product in its Python form.
            This template matcher class utilizes the <code>matchTemplate()</code> function from the OpenCV library and allows
            configuration of its internal settings.        
        </li>
        
        <li>
            Unless specified otherwise in the class constructor, the <code>TM_CCORR_NORMED</code> variant of the algorithm is used.
            This variant is based on cross-correlating the template image with the target image and normalizing the template image first.
            This normalization step eliminates the effect of differences in template image pixel intensities on the result,
            ensuring that matching templates of different brightness levels yield the same location.<br>
            For more information on other possible configurations of the matching algorithm, refer to the OpenCV manual.
        </li>
        
        <li>
            The <a href="OpencvComparisonMethod.html">OpencvComparisonMethod</a> enumeration can assist in specifying the variant of the algorithm in the class constructor.
        </li>
        
        <li>
             Unlike the <a href="CognexMatcher.html">Cognex</a> or <a href="HogMatcher.html">histogram-of-gradients</a> matchers, the OpenCV algorithm <strong>does not provide a match score</strong>.
             Consequently, the 
             <a href="../../autoscript_sdb_microscope_client/structures/ImageMatch/score.html">score</a> member in the result object returned by the <code>match()</code> function is set to <code>None</code>.
        </li>
        
        <li>
            The <em>OpenCV</em> template matcher supports only 8-bit and 16-bit single-channel (grayscale) images.
        </li>
    </ul>
    
    <h2>Examples</h2>
    
    <pre><code class="language-python">
        import autoscript_toolkit.vision as vision_toolkit
        import autoscript_toolkit.user_interface as ui_toolkit
        from autoscript_toolkit.template_matchers import *
            
        # Acquire one full-frame image
        settings = GrabFrameSettings(resolution="1536x1024", dwell_time=1e-6)
        image = microscope.imaging.grab_frame(settings)
        
        # Acquire one reduced area image to serve as a template
        settings.reduced_area = Rectangle(0.05, 0.05, 0.10, 0.10)
        template = microscope.imaging.grab_frame(settings)
        
        # Locate the template in the original image with the default (M_CCORR_NORMED) comparison method
        opencv_matcher = OpencvTemplateMatcher()
        location = vision_toolkit.locate_feature(image, template, opencv_matcher)
        ui_toolkit.plot_match(image, template, location.center_in_pixels)
        
        # Repeat the step with a different algorithm variant
        opencv_matcher = OpencvTemplateMatcher(comparison_method_id=OpencvComparisonMethod.CCOEFF)
        location = vision_toolkit.locate_feature(image, template, opencv_matcher)
        ui_toolkit.plot_match(image, template, location.center_in_pixels)
    </code></pre>
    
    <h2>See also</h2>
    <a href="HogMatcher.html">HogMatcher</a>

<!-- Custom part - END -->
</body>
</html>
<!-- This file was automatically generated. Content between custom parts will not be regenerated. Remove this line if you want the generator to completely ignore this file. -->